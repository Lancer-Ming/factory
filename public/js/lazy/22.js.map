{"version":3,"sources":["webpack:///./resources/assets/js/utils/request.js","webpack:///./resources/assets/js/components/_error_message.vue","webpack:///resources/assets/js/components/_error_message.vue","webpack:///./resources/assets/js/components/_error_message.vue?3ef6","webpack:///resources/assets/js/views/system/Permission.vue","webpack:///./resources/assets/js/api/permission.js","webpack:///./resources/assets/js/views/system/Permission.vue?99eb","webpack:///./resources/assets/js/views/system/Permission.vue"],"names":["__WEBPACK_IMPORTED_MODULE_0_axios___default","a","interceptors","response","use","error","status","Object","__WEBPACK_IMPORTED_MODULE_1_element_ui__","message","type","data","response_status","msg","errors","html","result","values","forEach","item","push","apply","_toConsumableArray","dangerouslyUseHTMLString","Promise","reject","__webpack_exports__","Component","__webpack_require__","normalizeComponent","module","exports","props","messages","Array","render","_vm","this","_h","$createElement","_c","_self","_l","_v","_s","staticRenderFns","watch","filterText","val","$refs","tree2","filter","treeData","options","defaultProps","children","label","form","parent_id","name","icon","is_category","formLabelWidth","formType","showForm","id","created","_this","request","url","method","then","res","permissions","simplePermissions","methods","filterNode","value","indexOf","submitForm","_this2","successCallback","addPermissions","handleEdit","_this3","editData","$set","handleAdd","handleDelete","_this4","$confirm","confirmButtonText","cancelButtonText","center","catch","handleDragEnd","_this5","sort","sortPermissions","JSON","stringify","$message","showClose","staticClass","staticStyle","padding","attrs","on","click","$event","width","placeholder","size","model","callback","$$v","expression","ref","node-key","expand-on-click-node","default-expand-all","highlight-current","draggable","filter-node-method","node-drag-end","scopedSlots","_u","key","fn","node","_e","title","visible","update:visible","label-width","value-key","disabled","auto-complete","slot"],"mappings":"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","file":"js/lazy/22.js","sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport ErrorMessage from '../components/_error_message.vue'\r\n\r\n// http response 拦截器\r\naxios.interceptors.response.use(\r\n    response => {\r\n        return response;\r\n    },\r\n    error => {\r\n        // 403 没有权限\r\n        if (error.response.status == 403) {\r\n            Message({\r\n                message: '您没有权限操作',\r\n                type: 'warning',\r\n            })\r\n        }\r\n\r\n        // 422 表单或者其他的规则不符\r\n        if (error.response.status == 422) {\r\n            if (error.response.data.response_status) {\r\n                Message({\r\n                    message: error.response.data.msg,\r\n                    type: 'warning',\r\n                })\r\n            }\r\n\r\n            let errors = error.response.data.errors\r\n            const arr = Object.values(errors)\r\n            let html = ''\r\n            let result = []\r\n            arr.forEach(item => {\r\n                result.push(...item)\r\n            })\r\n\r\n            result.forEach(item => {\r\n                html += `<li style=\"list-style: none;\">${item}</li>`\r\n            })\r\n\r\n            Message({\r\n                message: html,\r\n                type: 'error',\r\n                dangerouslyUseHTMLString: true\r\n            })\r\n        }\r\n        return Promise.reject(error.response.data)\r\n    });\r\n\r\nexport default axios\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/utils/request.js","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = require(\"!!babel-loader?{\\\"cacheDirectory\\\":true,\\\"presets\\\":[[\\\"env\\\",{\\\"modules\\\":false,\\\"targets\\\":{\\\"browsers\\\":[\\\"> 2%\\\"],\\\"uglify\\\":true}}]],\\\"plugins\\\":[\\\"transform-object-rest-spread\\\",[\\\"transform-runtime\\\",{\\\"polyfill\\\":false,\\\"helpers\\\":false}],\\\"syntax-dynamic-import\\\"]}!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./_error_message.vue\")\n/* template */\nvar __vue_template__ = require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-536d626a\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./_error_message.vue\")\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/assets/js/components/_error_message.vue\n// module id = 653\n// module chunks = 1 3 4 5 6 7 8 9 10 11 12 13 14 15 16 20 22 23 24","<template>\r\n    <ul>\r\n        <li v-for=\"message in messages\"> {{message}} </li>\r\n    </ul>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props: {\r\n            messages: {\r\n                type: Array\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// resources/assets/js/components/_error_message.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',_vm._l((_vm.messages),function(message){return _c('li',[_vm._v(\" \"+_vm._s(message)+\" \")])}))}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-536d626a\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./resources/assets/js/components/_error_message.vue\n// module id = 655\n// module chunks = 1 3 4 5 6 7 8 9 10 11 12 13 14 15 16 20 22 23 24","<template>\r\n    <div class=\"container permission-page\">\r\n        <div class=\"toolsbar\">\r\n            <div class=\"btnBox\">\r\n                <el-button type=\"primary\" class=\"el-icon-plus\" @click=\"handleAdd({id: 0})\" style=\"padding: 5px 8px;\">新增顶级菜单</el-button>\r\n            </div>\r\n            <div class=\"searchBox\">\r\n                <el-input\r\n                        placeholder=\"输入关键字进行过滤\"\r\n                        size=\"mini\"\r\n                        style=\"width: 100%\"\r\n                        v-model=\"filterText\">\r\n                </el-input>\r\n            </div>\r\n        </div>\r\n        <el-tree\r\n                :data=\"treeData\"\r\n                node-key=\"id\"\r\n                :expand-on-click-node=\"false\"\r\n                default-expand-all\r\n                highlight-current\r\n                @node-drag-end=\"handleDragEnd\"\r\n                draggable\r\n                class=\"permission_menu\"\r\n                :filter-node-method=\"filterNode\"\r\n                ref=\"tree2\"\r\n        >\r\n\r\n            <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n            <span>{{ node.label }}</span>\r\n                <span class=\"permission_buttons\">\r\n                    <i class=\"el-icon-plus\" @click=\"handleAdd(data)\" v-if=\"data.is_category > 0\"></i>\r\n                    <i class=\"el-icon-edit\" @click=\"handleEdit(data)\"></i>\r\n                    <i class=\"el-icon-delete\" @click=\"handleDelete(data)\"></i>\r\n                </span>\r\n            </span>\r\n        </el-tree>\r\n\r\n        <el-dialog title=\"编辑菜单权限\" :visible.sync=\"showForm\" class=\"Permission_dialog\">\r\n            <el-form :model=\"form\">\r\n                <el-form-item label=\"上级菜单\" :label-width=\"formLabelWidth\">\r\n                    <el-select v-model=\"form.parent_id\" placeholder=\"请选择\" value-key=\"item\" disabled size=\"mini\">\r\n                        <el-option\r\n                                v-for=\"item in options\"\r\n                                :key=\"item.id\"\r\n                                :value=\"item.id\"\r\n                                :label=\"item.label\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"权限路由名\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.name\" auto-complete=\"off\" size=\"mini\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"权限菜单名\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.label\" auto-complete=\"off\" size=\"mini\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"图标icon\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.icon\" auto-complete=\"off\" size=\"mini\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"是否为菜单\" :label-width=\"formLabelWidth\" class=\"formLabelWidth_full\">\r\n                    <el-radio v-model=\"form.is_category\" :label=\"1\">是</el-radio>\r\n                    <el-radio v-model=\"form.is_category\" :label=\"0\">否</el-radio>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"showForm = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import {\r\n        getPermissions,\r\n        editPermissions,\r\n        updatePermissions,\r\n        addPermissions,\r\n        deletePermissions,\r\n        sortPermissions\r\n    } from '../../api/permission'\r\n\r\n    export default {\r\n        watch: {\r\n            filterText(val) {\r\n                this.$refs.tree2.filter(val);\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                filterText: '',\r\n                treeData: [],\r\n                options: [],\r\n                defaultProps: {\r\n                    children: 'children',\r\n                    label: 'label'\r\n                },\r\n                form: {\r\n                    parent_id: null,\r\n                    name: '',\r\n                    label: '',\r\n                    icon: '',\r\n                    is_category: 1\r\n                },\r\n                formLabelWidth: \"100px\",\r\n                formType: '',\r\n                showForm: false,\r\n                id: null\r\n            };\r\n        },\r\n        created() {\r\n            getPermissions().then(res => {\r\n                if (res.data.response_status === \"success\") {\r\n                    this.treeData = res.data.data.permissions\r\n                    this.options = res.data.data.simplePermissions\r\n                }\r\n            })\r\n        },\r\n        methods: {\r\n            filterNode(value, data) {\r\n                if (!value) return true;\r\n                return data.label.indexOf(value) !== -1;\r\n            },\r\n            submitForm() {\r\n                if (this.formType === 'edit') {\r\n                    updatePermissions(this.id, this.form).then(res => {\r\n                        this.successCallback(res)\r\n                    })\r\n                } else {\r\n                    addPermissions(this.form).then(res => {\r\n                        this.successCallback(res)\r\n                    })\r\n                }\r\n            },\r\n\r\n            handleEdit(data) {\r\n                this.formType = 'edit'\r\n                editPermissions(data.id).then(res => {\r\n                    if (res.data.response_status === \"success\") {\r\n                        let editData = res.data.data\r\n                        this.form = {\r\n                            name: editData.name,\r\n                            label: editData.label,\r\n                            icon: editData.icon,\r\n                            is_category: editData.is_category\r\n                        }\r\n                        this.$set(this.form, 'parent_id', editData.parent_id)\r\n                        this.id = editData.id\r\n                        this.showForm = true\r\n                    }\r\n                })\r\n            },\r\n            handleAdd(data) {\r\n                // 改变表单类型\r\n                this.formType = 'add'\r\n                // 清空form\r\n                this.form = {\r\n                    parent_id: null,\r\n                    name: '',\r\n                    label: '',\r\n                    icon: '',\r\n                    is_category: 1\r\n                }\r\n                // 改变表单的上级菜单\r\n                this.$set(this.form, 'parent_id', data.id)\r\n                // 使表单显示\r\n                this.showForm = true\r\n            },\r\n            handleDelete(data) {\r\n                this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning',\r\n                    center: true\r\n                }).then(() => {\r\n                    deletePermissions(data.id).then(res => {\r\n                        this.successCallback(res)\r\n                    })\r\n                }).catch(() => {\r\n                    return\r\n                })\r\n            },\r\n            handleDragEnd() {\r\n                let data = JSON.stringify(this.treeData)\r\n                sortPermissions(data).then(res => {\r\n                    if (res.data.response_status === \"success\") {\r\n                        this.successCallback(res)\r\n                    }\r\n                })\r\n            },\r\n            successCallback(res) {\r\n                if (res.data.response_status === \"success\") {\r\n                    this.treeData = res.data.data\r\n                    this.showForm = false\r\n                    this.$message({\r\n                        type: 'success',\r\n                        showClose: true,\r\n                        message: res.data.msg\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    };\r\n</script>\n\n\n// WEBPACK FOOTER //\n// resources/assets/js/views/system/Permission.vue","import axios from '../utils/request'\r\n\r\nexport function getPermissions() {\r\n    return axios({\r\n        url: `/permission?is_category=1`,\r\n        method: 'get'\r\n    })\r\n}\r\n\r\nexport function editPermissions(id) {\r\n    return axios({\r\n        url: `/permission/${id}/edit`,\r\n        method: 'get'\r\n    })\r\n}\r\n\r\nexport function updatePermissions(id, form) {\r\n    return axios({\r\n        url: `/permission/${id}`,\r\n        method: 'patch',\r\n        data: form\r\n    })\r\n}\r\n\r\nexport function addPermissions(form) {\r\n    return axios({\r\n        url: `/permission`,\r\n        method: 'post',\r\n        data: form\r\n    })\r\n}\r\n\r\nexport function deletePermissions(id) {\r\n    return axios({\r\n        url: `/permission/${id}`,\r\n        method: 'delete',\r\n    })\r\n}\r\n\r\nexport function sortPermissions(data) {\r\n    return axios({\r\n        url: `/permission/sort`,\r\n        method: 'put',\r\n        data: {sort: data}\r\n    })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/api/permission.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container permission-page\"},[_c('div',{staticClass:\"toolsbar\"},[_c('div',{staticClass:\"btnBox\"},[_c('el-button',{staticClass:\"el-icon-plus\",staticStyle:{\"padding\":\"5px 8px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleAdd({id: 0})}}},[_vm._v(\"新增顶级菜单\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"searchBox\"},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"输入关键字进行过滤\",\"size\":\"mini\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}})],1)]),_vm._v(\" \"),_c('el-tree',{ref:\"tree2\",staticClass:\"permission_menu\",attrs:{\"data\":_vm.treeData,\"node-key\":\"id\",\"expand-on-click-node\":false,\"default-expand-all\":\"\",\"highlight-current\":\"\",\"draggable\":\"\",\"filter-node-method\":_vm.filterNode},on:{\"node-drag-end\":_vm.handleDragEnd},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_vm._v(\" \"),_c('span',{staticClass:\"permission_buttons\"},[(data.is_category > 0)?_c('i',{staticClass:\"el-icon-plus\",on:{\"click\":function($event){_vm.handleAdd(data)}}}):_vm._e(),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-edit\",on:{\"click\":function($event){_vm.handleEdit(data)}}}),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":function($event){_vm.handleDelete(data)}}})])])}}])}),_vm._v(\" \"),_c('el-dialog',{staticClass:\"Permission_dialog\",attrs:{\"title\":\"编辑菜单权限\",\"visible\":_vm.showForm},on:{\"update:visible\":function($event){_vm.showForm=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"上级菜单\",\"label-width\":_vm.formLabelWidth}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"value-key\":\"item\",\"disabled\":\"\",\"size\":\"mini\"},model:{value:(_vm.form.parent_id),callback:function ($$v) {_vm.$set(_vm.form, \"parent_id\", $$v)},expression:\"form.parent_id\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.id,attrs:{\"value\":item.id,\"label\":item.label}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限路由名\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"size\":\"mini\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限菜单名\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"size\":\"mini\"},model:{value:(_vm.form.label),callback:function ($$v) {_vm.$set(_vm.form, \"label\", $$v)},expression:\"form.label\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"图标icon\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"size\":\"mini\"},model:{value:(_vm.form.icon),callback:function ($$v) {_vm.$set(_vm.form, \"icon\", $$v)},expression:\"form.icon\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"formLabelWidth_full\",attrs:{\"label\":\"是否为菜单\",\"label-width\":_vm.formLabelWidth}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.form.is_category),callback:function ($$v) {_vm.$set(_vm.form, \"is_category\", $$v)},expression:\"form.is_category\"}},[_vm._v(\"是\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0},model:{value:(_vm.form.is_category),callback:function ($$v) {_vm.$set(_vm.form, \"is_category\", $$v)},expression:\"form.is_category\"}},[_vm._v(\"否\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showForm = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6731d2be\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./resources/assets/js/views/system/Permission.vue\n// module id = 797\n// module chunks = 22","var normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = require(\"!!babel-loader?{\\\"cacheDirectory\\\":true,\\\"presets\\\":[[\\\"env\\\",{\\\"modules\\\":false,\\\"targets\\\":{\\\"browsers\\\":[\\\"> 2%\\\"],\\\"uglify\\\":true}}]],\\\"plugins\\\":[\\\"transform-object-rest-spread\\\",[\\\"transform-runtime\\\",{\\\"polyfill\\\":false,\\\"helpers\\\":false}],\\\"syntax-dynamic-import\\\"]}!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Permission.vue\")\n/* template */\nvar __vue_template__ = require(\"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6731d2be\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Permission.vue\")\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/assets/js/views/system/Permission.vue\n// module id = 864\n// module chunks = 22"],"sourceRoot":""}